---
layout: default
title: 修复网页上表格的排序功能
excerpt: 在测试版的股票行情网页中，表格的排序功能一直不正常。本来是数字顺序排序列，却成了文本顺序的排序。
tags: [Coding]
---
{{ page.title }}
================
这是[**网页**](http://cfishacker.com/stock/) , 这是[**完整代码**](https://github.com/cforth/stock)。

在测试版的股票行情网页中，表格的排序功能一直不正常。本来是数字顺序排序列，却成了文本顺序的排序。今天我想好好研究下排序功能的源代码，确无意发现了问题所在。

在正式版的股票行情网页中不存在这个问题，于是我比较了两个版本的网页在缓存中的表格源代码，发现代码是一模一样的。那问题出在哪儿呢，我继续看表格生成的源代码，注意到了测试版网页中表格初始化的一个小细节。为了动态的更新单元格中的数据，在空表格初始化时，我选择了用汉字“初始化”来填充，这样表格中的单元格不会全部挤在一起。但是在动态的添加行情数据在单元格中时，好像默认把数字格式转换成了文本格式。这就是排序功能出问题的原因！所以数据列全部用文本格式来排序了。

在把表格初始化时的填充字“初始化”改成了数字格式的"88"后，一切问题都解决了。可我还是没弄明白排序功能源代码的实现。

P.S.后来发现排序还是有问题。

{{ page.date | date: "%Y-%m-%d" }}
