---
layout: default
title: 优化股票行情网页的思考
excerpt: 如何能手工设置行情刷新时间，这是个问题。
---
{{ page.title }}
----------------

[**投资决策参考**](http://cfishacker.com/stock/)目前运行良好，可以正确的每5秒刷新行情。但是还存在着两点不足：

1. 无法调整网页行情中的股票显示条数。

2. 无法自动调整行情刷新的间隔时间。

这两点不足共同造成了网页的下载量会比较大。计算出平均每小时将下载10.33MB的数据，24小时将下载248.06MB的数据。在网速不好或者下载流量有限制的环境下，就成了很严重的问题。比如在手机上查看。

改进的方法也是有两种：

1. 设置一个开关选项来控制当前股票显示条数，让用户来决定显示多少条。

2. 设置一个网络时间获取函数，当处于股市闭市时间区间内时，网页停止自动刷新行情。

这两种方法要一起使用，才可以把网页的下载量控制在一个合理的范围内。我参考了大的股票行情网站(如163股票)，它们的做法也是，通过分页来控制每页的股票显示条数，以及通过在股市闭市时间区间内不更新行情数据来控制网页下载量。

我做的网页存在的最大问题是，因为是静态的page，所以每次都获取了163股票行情的JSON数据，不能只获取其中某几个子数据。如果是动态网站，则不存在这个问题。

以上是我对于优化股票行情网页的思考。


{{ page.date | date: "%Y-%m-%d" }}
